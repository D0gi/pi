<!--##############################################################################################################
DO:
./start_remote.sh (im Presentationsordner)

oder

╔[/var/www/html/beispielpresi/master]
╚>$ node plugin/multiplex


https://github.com/D0gi/reveal.js
##################################################################################################################
-->


<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>PI</title>

	<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
	<meta name="author" content="Hakim El Hattab">

	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/red_dark.css" id="theme">
	<link rel="stylesheet" href="lib/font/font-awesome/css/font-awesome.min.css" />

	<!-- Code syntax highlighting -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- individual stylesheet -->
	<link href="css/style.css" rel="stylesheet" />

	<!-- Printing and PDF exports -->
	<script>
	var link = document.createElement( 'link' );
	link.rel = 'stylesheet';
	link.type = 'text/css';
	link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
	document.getElementsByTagName( 'head' )[0].appendChild( link );
	</script>

	<!--[if lt IE 9]>
	<script src="lib/js/html5shiv.js"></script>
	<![endif]-->
</head>

<body>

	<div class="reveal">

		<!-- Any section element inside of this container is displayed as a slide -->
		<div class="slides">
			<!-- ############################################################################################################################# -->


			<section data-markdown section data-separator="^\n---\n$" data-separator-vertical="^\n--\n$" data-element-attributes="{_\s*?([^}]+?)}" data-separator-notes="^note:">
				<script type="text/template">
				<br>
				## Automation mit 
				# Raspberry Pi 
				## First steps
				<img id="pi"  src="img/pi.png" width="45%" href="#"  ></img>


				note: BLABLABLA

				--

				
				<i class="fa fa-2x fa-list"></i>

				<ul style="list-style-type:none">
				<li><h3>1. Einleitung</h3></li>
				<li><h3>2. Grundlagen</h3></li>
				<li><h3>3. GPIOs</h3></li>
				<li><h3>4. Motoren & H-Brücke</h3></li>
				<li><h3>5. Ultraschall Modul HC-SR04</h3></li>
				<li><h3>6. I²C</h3></li>
				<li><h3>7. Servos</h3></li>
				<li><h3>8. REST & co</h3></li>
				</ul>			
				</script>
			</section>

			<section data-markdown section data-separator="^\n---\n$" data-separator-vertical="^\n--\n$" data-element-attributes="{_\s*?([^}]+?)}" data-separator-notes="^note:">
				<script type="text/template">
				<p class="bla">Einleitung </p>
				
				# Einleitung
				
				note: $nicht vollständig

								
				</script>
			</section>

			<section data-markdown section data-separator="^\n---\n$" data-separator-vertical="^\n--\n$" data-element-attributes="{_\s*?([^}]+?)}" data-separator-notes="^note:">
				<script type="text/template">
				<p class="bla">Grundlagen</p>
				
				# Grundlagen
				
				note: $nicht vollständig

				--

				<p class="bla">Grundlagen</p>			
				
				<img  src="fritzing/Steckplatine.png" width="65%" href="#" ></img>

				--

				<p class="bla">Grundlagen</p>			
				
				<img  id="aktor" src="img/aktor1.png" width="80%" href="#" onclick="secondimg('aktor','img/aktor2.png')" ></img></p>

				--

				<p class="bla">Grundlagen</p>			
				
				<img id="npn" src="img/npnvspnp_dark.png" width="65%" href="#" ></img>

				--

				<p class="bla">Grundlagen</p>

				- `cd` - Verzeichniswechsel

				- `ls` - Verzeichnisinhalt anzeigen

				- `cp` - Kopieren

				- `rm` - Entfernen

				- `echo` - Ausgebe von Text

				- `cat` - Ausgebe von Dateiinhalten

				- `nano` - Texteditor

				- `sudo` - Kommandos als alternativer Nutzer (root) ausführen

				- `chmod` - Zugriffsrechte ändern
			 	
				


								
				</script>
			</section>

			<section data-markdown section data-separator="^\n---\n$" data-separator-vertical="^\n--\n$" data-element-attributes="{_\s*?([^}]+?)}" data-separator-notes="^note:">
				<script type="text/template">
				<p class="bla">GPIOs</p>
				
				# GPIOs		

				note: $nicht vollständig

				--

				<p class="bla">GPIOs</p>


				<img id="gpio_pin" src="img/gpio_pin_dark.png" width="75%" href="#" ></img>

				--

				<p class="bla">GPIOs</p>

				GPIOs ansteuern über:

				- sys-Dateisystem

				- Programm `gpio` (wiringPi)

				- Bibliotheken (in C, Python, etc.)

				- ...

				--

				<p class="bla">GPIOs - sys-Dateisystem</p>

				- `ls /sys/class/gpio`

					<pre><code>export  gpiochip0  unexport</code></pre>

				- GPIO aktivieren:

				    - ggf. Zugriffsrechte ändern

						`sudo chmod 666 /sys/class/gpio`

					- GPIO Nr. X exportieren

						`echo "7" >> export `

				- GPIO deaktivieren:
					
					`echo "7" >> unexport `

				--

				<p class="bla">GPIOs - sys-Dateisystem</p>

				- `ls /sys/class/gpio/gpio7 `
				
					<pre><code>active_low  device  direction  edge  power  subsystem  uevent  value</code></pre>

					- direction: `in` / `out`

					- value: `1` / `0`

					- active_low: Eingangssignal invertieren (`1` / `0`)

					- edge: für interrupt (`none`, `rising`, `falling`)


				--

				<p class="bla">GPIOs -Programm `gpio`</p>

				--

				<p class="bla">GPIOs -Bibliotheken</p>


				

				--

				<p class="bla">GPIOs</p>


				<img  src="fritzing/led_Steckplatine.png" width="65%" href="#" ></img>

				--

				<p class="bla">GPIOs</p>
				
				<img  src="fritzing/led_taster_Steckplatine.png" width="65%" href="#" ></img>

				--
				
				gpio -g wfi 17 falling

				(wfi – wait for interrupt)



				http://www.forum-raspberrypi.de/Thread-sensor-signal-per-interrupt-abfragen

				http://www.raspberry-pi-geek.de/Magazin/2013/05/Tricks-zum-Programmieren-der-GPIO-Schnittstelle

				http://kampis-elektroecke.de/?page_id=3740
				1
				GPIO.setup(24, GPIO.IN, pull_up_down = GPIO.PUD_DOWN)
				Anschließend deklariere ich die ISR, also den Programmabschnitt der ausgeführt werden soll sobald ein Interrupt ausgelöst wird:

				￼
				def Interrupt(channel):
				   global Counter
				   Counter = Counter + 1
				   print "Counter " + str(Counter)
				1
				2
				3
				4
				def Interrupt(channel):
				   global Counter
				   Counter = Counter + 1
				   print "Counter " + str(Counter)
				Die Zeile

				￼
				global Counter
				1
				global Counter
				sorgt dafür, dass ich die Variable Counter in der ISR verändern darf, da dadurch eine Referenz auf die globale Variable Counter erzeugt wird.
				Dies ist notwendig da ich die Variable Counter verändern möchte. Wenn ich sie nur lesen will, kann ich diese Zeile weglassen.
				Die anderen beiden Zeilen erhöhen die Variable und geben den Inhalt der Variable aus.
				Nun muss dem Programm nur noch die Bedingung für das Auslösen eines Interrupts mitgeteilt werden:

				￼
				GPIO.add_event_detect(24, GPIO.RISING, callback = Interrupt, bouncetime = 200)
				1
				GPIO.add_event_detect(24, GPIO.RISING, callback = Interrupt, bouncetime = 200)
				Jetzt wird der Interrupt von GPIO 24 aktiviert. Als Auslösekriterium gebe ich eine steigende Flanke an und mittels callback = Interrupt sage ich, dass das Programm bei einem Interrupt in 

								
				</script>
			</section>

			<section data-markdown section data-separator="^\n---\n$" data-separator-vertical="^\n--\n$" data-element-attributes="{_\s*?([^}]+?)}" data-separator-notes="^note:">
				<script type="text/template">
				<p class="bla">Motoren & H-Brücke</p>
				
				# Motoren & H-Brücke

				--

				<p class="bla">Motoren & H-Brücke</p>

				<img id="h-bridge" src="img/h-bridge_2.gif" width="70%" href="#" onclick="changehbridge('h-bridge');" ></img>
				
				note: Schaltsymbol für Motor ist falsch!!!!

				--

				<p class="bla">Motoren & H-Brücke</p>

				<img  src="fritzing/hbrucke_Steckplatine.png" width="65%" href="#" ></img>

								
				</script>
			</section>

			<section data-markdown section data-separator="^\n---\n$" data-separator-vertical="^\n--\n$" data-element-attributes="{_\s*?([^}]+?)}" data-separator-notes="^note:">
				<script type="text/template">
				<p class="bla">Ultraschall Modul HC-SR04 </p>
				
				# Ultraschall Modul HC-SR04
				
				note: $nicht vollständig

				--

				<p class="bla">Ultraschall Modul HC-SR04 </p>

				<img  src="fritzing/ultraschall_Steckplatine.png" width="60%" href="#" ></img>

								
				</script>
			</section>



			<section data-markdown section data-separator="^\n---\n$" data-separator-vertical="^\n--\n$" data-element-attributes="{_\s*?([^}]+?)}" data-separator-notes="^note:">
				<script type="text/template">
				<p class="bla">I²C </p>
				
				# I²C 
				<img id="i2cimg"  src="img/i2c_dark.svg" width="100%" href="#"  ></img>

				--

				<p class="bla">I²C </p>

				##activate I2C
				- device/file erzeugen

					`sudo mknod /dev/i2c-0 c 89 0`
				
					`sudo mknod /dev/i2c-1 c 89 1`
				- Nutzer Zugriffsrechte gewähren

					`sudo usermod -aG i2c pi`
				
				- /etc/modprobe.d/raspi-blacklist.conf editieren
				<pre><code>blacklist spi and i2c by default 
				blacklist spi-bcm2708
				blacklist i2c-bcm2708
				</code></pre>

				- modul hinzufügen				
					`sudo nano /etc/modules` 
					i2c-dev

				--

				<pre><code>
					
#include <stdio.h>
#include <stdlib.h>
#include <wiringPi.h>
 
 
#define TRIG 1
#define ECHO 5
#define LED  6
 
void setup() {
        wiringPiSetup();
        pinMode(TRIG, OUTPUT);
        pinMode(LED, OUTPUT);
        pinMode(ECHO, INPUT);
 
        //TRIG pin must start LOW
        digitalWrite(TRIG, LOW);
        delay(30);
}
 
int getCM() {
        //Send trig pulse
        digitalWrite(TRIG, HIGH);
        delayMicroseconds(20);
        digitalWrite(TRIG, LOW);
 
        //Wait for echo start
        while(digitalRead(ECHO) =
				</code></pre>
			
				

				
					
				
				
				--

				<p class="bla">I²C </p>

				##activate I2C

				`sudo modprobe i2c-bcm2708`
				
				`sudo modprobe i2c_dev`
				
				`lsmod`

				ab Kernelversion 3.18
				
				`sudo nano /boot/config.txt`

				dtparam=i2c1=on
				
				dtparam=i2c_arm=on
				
				`sudo reboot`

				note: $nicht vollständig

				
				</script>
			</section>

				
			

			<section data-markdown section data-separator="^\n---\n$" data-separator-vertical="^\n--\n$" data-element-attributes="{_\s*?([^}]+?)}" data-separator-notes="^note:">
				<script type="text/template">
				<p class="bla">Servos</p>
				
				# Servos
				
				note: $nicht vollständig

				--

				<p class="bla">Servos</p>

				<img id="servo"  src="img/servo_dark.png" width="65%" href="#"  ></img>

				--

				<p class="bla">Servos</p>

				<img  src="fritzing/servo_Steckplatine.png" width="65%" href="#" ></img>


								
				</script>
			</section>

			<section data-markdown section data-separator="^\n---\n$" data-separator-vertical="^\n--\n$" data-element-attributes="{_\s*?([^}]+?)}" data-separator-notes="^note:">
				<script type="text/template">
				<p class="bla">REST & co </p>
				
				# REST & co
				
				note: $nicht vollständig

								
				</script>
			</section>

			<!-- ###################### Wichtig, Damit Code Farbig, Drinn lassen!-->
			<section><pre><code></code></pre></section>
			<!-- ############################################################################################################################# -->
		</div>
		<div class="slide-footer">
			<div class="slide-footer-logo">
				<img id="logo" onclick="togglestyle()" src="img/hftl_icon3.png" width="55%" href="#" #></img>
			</div>
			<div class="slide-footer-logo2">
				<img id="logo2" onclick="togglestyle()" src="img/dog.svg" width="100%" href="#" #></img>
			</div>
			<div class="slide-footer-content">
				Philipp Dockhorn
			</div>
		</div>
	</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>
	<script>

	var mystyle = "dark";
	function togglestyle(){
		var mystyles={
			dark:{
				css:"red_dark.css",
				logo:"hftl_icon3.png"
			},
			light:{
				css:"red_light.css",
				logo:"hftl_icon.png"
			}
		}
		mystyle = mystyle == "dark" ? "light" : "dark";
		document.getElementById('theme').setAttribute('href','css/theme/' + mystyles[mystyle].css); 
		document.getElementById('logo').setAttribute('src','img/' + mystyles[mystyle].logo);
		document.getElementById('i2cimg').setAttribute('src','img/i2c_' + mystyle + '.svg');
		document.getElementById('gpio_pin').setAttribute('src','img/gpio_pin_' + mystyle + '.png');
		document.getElementById('servo').setAttribute('src','img/servo_' + mystyle + '.png');
		document.getElementById('npn').setAttribute('src','img/npnvspnp_' + mystyle + '.png');
		return;
	}


	function secondimg(id,img){
		document.getElementById(id).setAttribute('src',img);
	}
	var zi=2;
	function changehbridge(id){
		zi = (zi>=6||zi<=1) ? 2 : zi+1;
		document.getElementById(id).setAttribute('src','img/h-bridge_'+zi+'.gif');
		return;
	}

	var zj=0;
	function changemesh(id){
		zj = (zj>=3||zj<=0) ? 1 : zj+1;
		document.getElementById(id).setAttribute('src','img/mesh'+zj+'.svg');
		return;
	}
	
	// Full list of configuration options available at:
	// https://github.com/hakimel/reveal.js#configuration
	Reveal.initialize({

		// The "normal" size of the presentation, aspect ratio will be preserved
	    // when the presentation is scaled to fit different resolutions. Can be
	    // specified using percentage units.
	    //width: 1280,
	    //height: 720,
	    //width: 1920,
	    //height: 1080,

	    // Factor of the display size that should remain empty around the content
	    //margin: 0.2,

	    // Bounds for smallest/largest possible scale to apply to content
	    // minScale: 0.3,
	    // maxScale: 1.5,


	    controls: true,
	    progress: true,
	    history: true,
	    center: false,
	    slideNumber: true,
	    hideAddressBar: true,

		transition: 'convex', // none/fade/slide/convex/concave/zoom
		backgroundTransition: 'convex',
		
		multiplex: {
	        // Example values. To generate your own, see the socket.io server instructions.
	        secret: '14309164707776388001', // Obtained from the socket.io server. Gives this (the master) control of the presentation
	        id: '2a8d56656c27ca92', // Obtained from socket.io server
	        url: '192.168.1.116:1948' // Location of socket.io server
	    },



		// Optional reveal.js plugins
		dependencies: [
		
		{ src: '//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js', async: true },
		{ src: 'plugin/multiplex/master.js', async: true },

		
		//{ src: 'socket.io/socket.io.js', async: true },
		
		
		{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
		{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
		{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
		{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
		{ src: 'plugin/zoom-js/zoom.js', async: true },
		{ src: 'plugin/notes/notes.js', async: true }
		]
	});



</script>

</body>
</html>
